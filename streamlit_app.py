# app.py
import streamlit as st
import pandas as pd
from datetime import datetime
import os

# --- ŸÖŸÑŸÅÿßÿ™ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ---
CSV_FILE = "evaluations.csv"  # ŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™
USERS_FILE = "users.csv"      # ŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ

# --- ÿ•ÿπÿØÿßÿØ ÿßŸÑÿµŸÅÿ≠ÿ© ---
st.set_page_config(page_title="ÿ™ŸÇŸäŸäŸÖ", layout="wide", page_icon="üöó")

# --- ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ---
if "page" not in st.session_state:
    st.session_state.page = "login"
    if "current_user" not in st.session_state:
        st.session_state.current_user = None
        if "errors_selected" not in st.session_state:
            st.session_state.errors_selected = []
            if "notes" not in st.session_state:
                st.session_state.notes = ""
                if "start_time" not in st.session_state:
                    st.session_state.start_time = None

                    # --- ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ÿÆÿ∑ÿßÿ° ---
                    errors_list = [
                            "ÿ®ÿßÿ® ÿßŸÑÿ≥ÿßÿ¶ŸÇ", "ÿ≠ÿ≤ÿßŸÖ", "ÿßŸÅÿ∂ŸÑŸäÿ©", "ÿ≥ÿ±ÿπÿ©", "ÿ∂ÿπŸÅ ŸÖÿ±ÿßŸÇÿ®ÿ©",
                                "ÿπÿØŸÖ ÿßŸÑÿ™ŸÇŸäÿØ ÿ®ÿßŸÑŸÖÿ≥ÿßÿ±ÿßÿ™", "ÿ≥ÿ±ÿπÿ© ÿßÿ´ŸÜÿßÿ° ÿßŸÑÿßŸÜÿπÿ∑ÿßŸÅ", "ÿ•ÿ¥ÿßÿ±ÿ© ŸÑŸÑŸÖŸàÿßÿ≤Ÿä", "ŸÖŸàŸÇŸÅ ŸÖŸàÿßÿ≤Ÿä",
                                    "ÿµÿØŸÖ ÿ®ÿßŸÑŸÖŸàÿßÿ≤Ÿä", "ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßÿ´ŸÜÿßÿ° ÿßŸÑÿÆÿ±Ÿàÿ¨", "ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÉŸÑÿ™ÿß ÿßŸÑŸÇÿØŸÖŸäŸÜ", "ÿ∂ÿπŸÅ ÿ™ÿ≠ŸÉŸÖ ÿ®ÿßŸÑŸÖŸÇŸàÿØ",
                                        "ÿµÿØŸÖ ÿ´ŸÖÿßŸÜŸäÿ©", "ÿ•ÿ¥ÿßÿ±ÿ© Ÿ©Ÿ† ÿÆŸÑŸÅŸä", "ŸÖŸàŸÇŸÅ Ÿ©Ÿ† ÿÆŸÑŸÅŸä", "ÿµÿØŸÖ Ÿ©Ÿ† ÿÆŸÑŸÅŸä", "ÿπŸÉÿ≥ ÿ≥Ÿäÿ±",
                                            "ŸÅŸÑÿ¥ÿ± ŸÑŸÑÿ±ÿ¨Ÿàÿπ", "ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿÆŸÑŸÅ", "ŸÖÿ±ÿßŸÇÿ®ÿ© ÿßÿ´ŸÜÿßÿ° ÿßŸÑÿ±ÿ¨Ÿàÿπ", "ÿ™ÿ≥ÿßÿ±ÿπ ÿπÿßŸÑŸä", "ÿ™ÿ®ÿßÿ∑ÿ§",
                                                "ŸÅÿ±ÿßŸÖŸÑ", "ÿπŸÑÿßŸÖÿ©ŸÇŸÅ", "ÿµÿØŸÖ ÿ±ÿµŸäŸÅ", "ÿÆÿ∑Ÿàÿ∑ ÿßŸÑŸÖÿ¥ÿßÿ©", "ÿ™ÿ¨ÿßŸàÿ≤ ÿßÿ¥ÿßÿ±ÿ©", "ŸÖŸàŸÇŸÅ ŸÜŸáÿßÿ¶Ÿä",
                                                    "ÿµÿØŸÖ ŸÜŸáÿßÿ¶Ÿä"
                    ]

                    # --- ÿßŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ŸÖŸÑŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ---
                    if not os.path.exists(USERS_FILE):
                        df_users = pd.DataFrame([{
                                    "Username": "hus585",
                                            "Password": "268450",
                                                    "Role": "ÿ±ÿ¶Ÿäÿ≥Ÿä",
                                                            "Active": 1
                        }])
                        df_users.to_csv(USERS_FILE,index=False)

                            # --- ÿØŸàÿßŸÑ ŸÖÿ≥ÿßÿπÿØÿ© ---
                        def load_users():
                                return pd.read_csv(USERS_FILE)

                                def save_users(df):
                                    df.to_csv(USERS_FILE, index=False)

                                    def go_home():
                                        st.session_state.page = "home"

                                        def save_report():
                                            end_time = datetime.now()
                                            report = {
                                                            "User": st.session_state.current_user,
                                                                    "Date": st.session_state.start_time.strftime("%Y-%m-%d"),
                                                                            "Start Time": st.session_state.start_time.strftime("%H:%M"),
                                                                                    "End Time": end_time.strftime("%H:%M"),
                                                                                            "Errors": ", ".join(st.session_state.errors_selected),
                                                                                                    "Notes": st.session_state.notes
                                                }
                                            if os.path.exists(CSV_FILE):
                                                            df = pd.read_csv(CSV_FILE)
                                                            df = df.append(report, ignore_index=True)

                                                            df = pd.DataFrame([report])
                                                            df.to_csv(CSV_FILE, index=False)

                                                                                    # --- ÿµŸÅÿ≠ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ---
                                                            if st.session_state.page == "login":
                                                                                        st.markdown("<h2 style='text-align:center;'>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</h2>", unsafe_allow_html=True)
                                                                                        username = st.text_input("ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ")
                                                                                        password = st.text_input("ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±", type="password")
                                                                                                    
                                                                                        if st.button("ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ"):
                                                                                                                df_users = load_users()
                                                                                                                user_row = df_users[(df_users["Username"]==username) & (df_users["Password"]==password)]
                                                                                                                if not user_row.empty:
                                                                                                                                            if user_row.iloc[0]["Active"] == 0:
                                                                                                                                                            st.error("ÿßŸÑÿ≠ÿ≥ÿßÿ® ŸÖÿπÿ∑ŸÑÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ŸÑÿ™ŸÅÿπŸäŸÑŸá.")

                                                                                                                                                                                        st.session_state.current_user = username
                                                                                                                                                                                                        st.session_state.user_role = user_row.iloc[0]["Role"]
                                                                                                                                                                                                                        st.session_state.page = "home"
                                                                                                                                                                                                                                else:
                                                                                                                                                                                                                                            st.error("ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©.")

                                                                                                                                                                                                                                            # --- ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ---
                                                                                                                                                                                                                                            elif st.session_state.page == "home":
                                                                                                                                                                                                                                                now = datetime.now()
                                                                                                                                                                                                                                                    st.markdown(f"<div style='text-align: left; font-size:12px;'>"
                                                                                                                                                                                                                                                                    f"{now.strftime('%Y-%m-%d')}<br>{now.strftime('%H:%M')}"
                                                                                                                                                                                                                                                                                    f"</div>", unsafe_allow_html=True)
                                                                                                                                                                                                                                                                                        st.markdown("<h1 style='text-align:center;'>ÿ™ŸÇŸäŸäŸÖ</h1>", unsafe_allow_html=True)
                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                col1, col2 = st.columns(2)
                                                                                                                                                                                                                                                                                                    with col1:
                                                                                                                                                                                                                                                                                                            if st.session_state.user_role in ["ÿ±ÿ¶Ÿäÿ≥Ÿä", "ŸÖŸÇŸäŸÖ"]:
                                                                                                                                                                                                                                                                                                                        if st.button("ÿßÿ®ÿØÿ£ ÿßŸÑÿ™ŸÇŸäŸäŸÖ"):
                                                                                                                                                                                                                                                                                                                                        st.session_state.page = "errors"
                                                                                                                                                                                                                                                                                                                                                        st.session_state.start_time = datetime.now()
                                                                                                                                                                                                                                                                                                                                                                        st.session_state.errors_selected = []
                                                                                                                                                                                                                                                                                                                                                                                        st.session_state.notes = ""
                                                                                                                                                                                                                                                                                                                                                                                            with col2:
                                                                                                                                                                                                                                                                                                                                                                                                    if st.button("ÿπÿ±ÿ∂ ÿßŸÑÿ≥ÿ¨ŸÑ ÿßŸÑÿ≥ÿßÿ®ŸÇ"):
                                                                                                                                                                                                                                                                                                                                                                                                                st.session_state.page = "history"
                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                        # ÿ•ÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ±ÿ¶Ÿäÿ≥Ÿä: ÿ≤ÿ± ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™
                                                                                                                                                                                                                                                                                                                                                                                                                            if st.session_state.user_role == "ÿ±ÿ¶Ÿäÿ≥Ÿä":
                                                                                                                                                                                                                                                                                                                                                                                                                                    if st.button("ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                st.session_state.page = "manage_users"

                                                                                                                                                                                                                                                                                                                                                                                                                                                    st.markdown("<p style='font-size:10px; text-align:center;'>ÿ™ÿµŸÖŸäŸÖ ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿπŸäŸäÿ±Ÿä</p>", unsafe_allow_html=True)

                                                                                                                                                                                                                                                                                                                                                                                                                                                    # --- ÿµŸÅÿ≠ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ£ÿÆÿ∑ÿßÿ° ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                    elif st.session_state.page == "errors":
                                                                                                                                                                                                                                                                                                                                                                                                                                                        st.markdown("<h2 style='text-align:center;'>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ£ÿÆÿ∑ÿßÿ°</h2>", unsafe_allow_html=True)
                                                                                                                                                                                                                                                                                                                                                                                                                                                            cols = st.columns(5)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                for idx, error in enumerate(errors_list):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        col = cols[idx % 5]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if col.button(error):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if error not in st.session_state.errors_selected:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.session_state.errors_selected.append(error)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                st.session_state.notes = st.text_area("ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™", st.session_state.notes, height=100)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if st.button("ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ™ŸÇŸäŸäŸÖ"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            save_report()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    st.session_state.page = "report"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        st.markdown("<p style='font-size:10px; text-align:center;'>ÿ™ÿµŸÖŸäŸÖ ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿπŸäŸäÿ±Ÿä</p>", unsafe_allow_html=True)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        # --- ÿµŸÅÿ≠ÿ© ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        elif st.session_state.page == "report":
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.markdown("<h2 style='text-align:center;'>ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä</h2>", unsafe_allow_html=True)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                st.write(f"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ®ÿØÿßŸäÿ©: {st.session_state.start_time.strftime('%Y-%m-%d')}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    st.write(f"ŸàŸÇÿ™ ÿßŸÑÿ®ÿØÿßŸäÿ©: {st.session_state.start_time.strftime('%H:%M')}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        st.write(f"ŸàŸÇÿ™ ÿßŸÑŸÜŸáÿßŸäÿ©: {datetime.now().strftime('%H:%M')}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.write("ÿßŸÑÿ£ÿÆÿ∑ÿßÿ°:")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                for err in st.session_state.errors_selected:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        st.write(f"- {err}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.write("ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™:")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                st.write(st.session_state.notes)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if st.button("ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            go_home()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                st.markdown("<p style='font-size:10px; text-align:center;'>ÿ™ÿµŸÖŸäŸÖ ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿπŸäŸäÿ±Ÿä</p>", unsafe_allow_html=True)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                # --- ÿµŸÅÿ≠ÿ© ÿßŸÑÿ≥ÿ¨ŸÑ ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                elif st.session_state.page == "history":
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    st.markdown("<h2 style='text-align:center;'>ÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™</h2>", unsafe_allow_html=True)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if os.path.exists(CSV_FILE):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                df = pd.read_csv(CSV_FILE)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        # ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÖŸÇŸäŸÖ: Ÿäÿπÿ±ÿ∂ ŸÅŸÇÿ∑ ÿ™ŸÇÿßÿ±Ÿäÿ±Ÿá
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if st.session_state.user_role == "ŸÖŸÇŸäŸÖ":
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            df = df[df["User"]==st.session_state.current_user]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    st.dataframe(df)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            selected_idx = st.selectbox("ÿßÿÆÿ™ÿ± ÿ±ŸÇŸÖ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ", df.index)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if st.button("ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                report = df.loc[selected_idx]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.write(f"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ: {report['User']}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        st.write(f"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ®ÿØÿßŸäÿ©: {report['Date']}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    st.write(f"ŸàŸÇÿ™ ÿßŸÑÿ®ÿØÿßŸäÿ©: {report['Start Time']}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                st.write(f"ŸàŸÇÿ™ ÿßŸÑŸÜŸáÿßŸäÿ©: {report['End Time']}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.write("ÿßŸÑÿ£ÿÆÿ∑ÿßÿ°:")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        for err in report['Errors'].split(", "):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        st.write(f"- {err}")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    st.write("ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™:")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                st.write(report['Notes'])
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    else:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.write("ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ŸÇŸäŸäŸÖÿßÿ™ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ÿ®ÿπÿØ.")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if st.button("ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        go_home()

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        # --- ÿµŸÅÿ≠ÿ© ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ (ÿ±ÿ¶Ÿäÿ≥Ÿä ŸÅŸÇÿ∑) ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        elif st.session_state.page == "manage_users":
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.markdown("<h2 style='text-align:center;'>ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ</h2>", unsafe_allow_html=True)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                df_users = load_users()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    st.dataframe(df_users)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.markdown("### ÿ™ŸÅÿπŸäŸÑ / ÿ™ÿπÿ∑ŸäŸÑ ÿ≠ÿ≥ÿßÿ®")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                selected_user_idx = st.selectbox("ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ÿÆÿØŸÖ", df_users.index)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if st.button("ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            df_users.at[selected_user_idx, "Active"] = 1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    save_users(df_users)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.success("ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®.")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if st.button("ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        df_users.at[selected_user_idx, "Active"] = 0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                save_users(df_users)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        st.success("ÿ™ŸÖ ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®.")

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.markdown("### ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿßÿ™")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                new_role = st.selectbox("ÿßÿÆÿ™ÿ± ÿµŸÑÿßÿ≠Ÿäÿ© ÿ¨ÿØŸäÿØÿ©", ["ÿ±ÿ¶Ÿäÿ≥Ÿä", "ŸÖŸÇŸäŸÖ", "ŸÖÿ¥ÿßŸáÿØ ŸÅŸÇÿ∑"])
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if st.button("ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿ©"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            df_users.at[selected_user_idx, "Role"] = new_role
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    save_users(df_users)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            st.success("ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿ©.")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if st.button("ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            go_home()
                                                }
                        }])
                    ]
